# ØµÙ‚Ø± (Saqr) - PRD (Product Requirements Document)

## Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬
ØªØ·Ø¨ÙŠÙ‚ ØµÙ‚Ø± Ù‡Ùˆ Ù…Ù†ØµØ© Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© Ø´Ø¨ÙŠÙ‡Ø© Ø¨Ù€ InstagramØŒ Ø­ÙŠØ« ÙŠØ´Ø§Ù‡Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙˆÙŠÙƒØ³Ø¨ÙˆÙ† Ù†Ù‚Ø§Ø· Ù…Ù‚Ø§Ø¨Ù„ ÙˆÙ‚ØªÙ‡Ù….

## Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

### 1. Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø·
- âœ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙƒØ³Ø¨ **1 Ù†Ù‚Ø·Ø© Ù„ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©** Ù…Ù† Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†
- âœ… **500 Ù†Ù‚Ø·Ø© = 1$** Ù„Ù„Ø³Ø­Ø¨
- âœ… **Ø­Ù…Ø§ÙŠØ© Ø¶Ø¯ Ø§Ù„ØºØ´**: Ù„Ø§ ÙŠÙ…ÙƒÙ† Ù…Ø´Ø§Ù‡Ø¯Ø© Ù†ÙØ³ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù…Ø±ØªÙŠÙ†

### 2. Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© (Authentication)
- âœ… ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¨Ù€ **Google** (Ø¹Ø¨Ø± Emergent Auth)
- âš ï¸ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¨Ù€ **Apple** (Ù…ØªØ§Ø­ ÙÙ‚Ø· Ø¹Ù„Ù‰ iOS native apps)
- âœ… ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¨Ù€ **Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±**
- âœ… ÙˆØ¶Ø¹ **Ø§Ù„Ø²Ø§Ø¦Ø±** (ØªØµÙØ­ Ø¨Ø¯ÙˆÙ† ØªØ³Ø¬ÙŠÙ„)

### 3. Ø¹Ø§Ø±Ø¶ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
- âœ… Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¨Ø´ÙƒÙ„ Ø¹Ù…ÙˆØ¯ÙŠ (Ù…Ø«Ù„ Instagram Reels)
- âœ… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- âœ… Ø¹Ø¯Ø§Ø¯ ÙˆÙ‚Øª Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©
- âœ… Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø· ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

### 4. ØµÙØ­Ø© Ø§Ù„Ù…Ø¹Ù„Ù†ÙŠÙ†
- âœ… Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯
- âœ… Ø¨Ø§Ù‚Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø©:
  - 500 Ø±ÙŠØ§Ù„/Ø´Ù‡Ø±
  - 1,350 Ø±ÙŠØ§Ù„/3 Ø£Ø´Ù‡Ø± (Ø®ØµÙ… 10%)
  - 2,400 Ø±ÙŠØ§Ù„/6 Ø£Ø´Ù‡Ø± (Ø®ØµÙ… 20%)
  - 4,200 Ø±ÙŠØ§Ù„/Ø³Ù†Ø© (Ø®ØµÙ… 30%)
- âœ… **ØªÙƒØ§Ù…Ù„ Stripe** (Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ø¦ØªÙ…Ø§Ù†ØŒ Apple PayØŒ Google Pay)
- âœ… **ØªÙƒØ§Ù…Ù„ Tap** (Ø¬Ø§Ù‡Ø² - ÙŠØ­ØªØ§Ø¬ TAP_API_KEY ÙÙŠ .env)
- âœ… Ø®ÙŠØ§Ø±Ø§Øª ÙŠØ¯ÙˆÙŠØ©: ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠØŒ STC Pay

### 5. Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ø­Ø¨
- âœ… Ø·Ù„Ø¨ Ø³Ø­Ø¨ Ø¹Ø¨Ø± PayPal
- âœ… Ø·Ù„Ø¨ Ø³Ø­Ø¨ Ø¹Ø¨Ø± STC Pay
- âœ… Ø·Ù„Ø¨ Ø³Ø­Ø¨ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ù…Ø­Ù„ÙŠ
- âœ… Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„ÙŠØ¯ÙˆÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø´Ø±Ù

### 6. Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø´Ø±Ù
- âœ… ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±Ù
- âœ… Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª (Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§ØªØŒ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§ØªØŒ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ØŒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†)
- âœ… Ø¥Ø¯Ø§Ø±Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨ (Ù…ÙˆØ§ÙÙ‚Ø©/Ø±ÙØ¶)
- âœ… Ø¥Ø¯Ø§Ø±Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª (Ù…ÙˆØ§ÙÙ‚Ø©/Ø±ÙØ¶)

### 8. ØªØ¹Ø¯Ø¯ Ø§Ù„Ù„ØºØ§Øª (i18n)
- âœ… **Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©** (Ø§ÙØªØ±Ø§Ø¶ÙŠ)
- âœ… **Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©**
- âœ… Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø³Ù‡Ù„ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙØ­Ø§Øª
- âœ… Ø­ÙØ¸ ØªÙØ¶ÙŠÙ„ Ø§Ù„Ù„ØºØ© ÙÙŠ localStorage

### 9. ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
- âœ… **React Native App** (Expo) - Ù…ÙÙƒØªÙ…Ù„ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
  - ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Google, Email, Guest)
  - Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª (Instagram Reels style)
  - ØµÙØ­Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
  - ØµÙØ­Ø© Ø§Ù„Ø³Ø­Ø¨

---

## Ù…Ø§ ØªÙ… ØªÙ†ÙÙŠØ°Ù‡ âœ…

### Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© (ÙŠÙ†Ø§ÙŠØ± 2025)

#### Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø­Ø±Ø¬Ø©
1. **Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© CORS/Network** - ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø®Ø·Ø£ syntax ÙŠÙ…Ù†Ø¹ Ø¨Ø¯Ø¡ Ø§Ù„Ù€ backend
2. **Ø¥ØµÙ„Ø§Ø­ ØµÙØ­Ø© AdminDashboard** - ÙƒØ§Ù†Øª Ù‡Ù†Ø§Ùƒ escaped quotes Ø®Ø§Ø·Ø¦Ø©
3. **Ø¥ØµÙ„Ø§Ø­ MongoDB _id serialization** - Ø¥Ø¶Ø§ÙØ© `{'_id': 0}` ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ queries

#### Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
1. **Ù†Ø¸Ø§Ù… Ù…ØµØ§Ø¯Ù‚Ø© ÙƒØ§Ù…Ù„** (`oauth_routes.py`):
   - Google OAuth Ø¹Ø¨Ø± Emergent Auth
   - ØªØ³Ø¬ÙŠÙ„ Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
   - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø¹Ø¨Ø± cookies

2. **ØªÙƒØ§Ù…Ù„ Stripe** (`payment_routes.py`):
   - 4 Ø¨Ø§Ù‚Ø§Øª Ø³Ø¹Ø±ÙŠØ©
   - Checkout sessions
   - Payment status polling
   - Webhook handling

3. **ØªÙƒØ§Ù…Ù„ Tap Payments** (`tap_routes.py`):
   - Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„ ÙÙˆØ± Ø¥Ø¶Ø§ÙØ© TAP_API_KEY
   - ÙŠØ¯Ø¹Ù… mada, Visa, Mastercard, Apple Pay

4. **ØªØ·Ø¨ÙŠÙ‚ React Native** (`/app/mobile`):
   - 4 Ø´Ø§Ø´Ø§Øª Ø±Ø¦ÙŠØ³ÙŠØ©
   - Ù†Ø¸Ø§Ù… ØªÙ†Ù‚Ù„
   - Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù€ API

---

## Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠ

### Backend (FastAPI)
```
/app/backend/
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ oauth_routes.py      # Google OAuth + Email auth
â”‚   â”œâ”€â”€ ad_routes.py         # Ads API
â”‚   â”œâ”€â”€ advertiser_routes.py # Advertiser API
â”‚   â”œâ”€â”€ withdrawal_routes.py # Withdrawal API
â”‚   â”œâ”€â”€ payment_routes.py    # Stripe payments
â”‚   â”œâ”€â”€ tap_routes.py        # Tap payments
â”‚   â”œâ”€â”€ admin_auth_routes.py # Admin login
â”‚   â””â”€â”€ admin_dashboard_routes.py # Admin dashboard
â””â”€â”€ server.py
```

### Frontend (React)
```
/app/frontend/src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ AuthPage.jsx
â”‚   â”œâ”€â”€ AuthCallback.jsx
â”‚   â”œâ”€â”€ AdViewer.jsx
â”‚   â”œâ”€â”€ ProfilePage.jsx
â”‚   â”œâ”€â”€ WithdrawPage.jsx
â”‚   â”œâ”€â”€ AdvertiserPage.jsx (with Stripe + Tap)
â”‚   â”œâ”€â”€ AdminLoginPage.jsx
â”‚   â”œâ”€â”€ AdminDashboard.jsx
â”‚   â”œâ”€â”€ PaymentSuccess.jsx
â”‚   â””â”€â”€ PaymentCancel.jsx
â””â”€â”€ App.js
```

### Mobile (React Native/Expo)
```
/app/mobile/
â”œâ”€â”€ App.js
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ AuthScreen.js
â”‚   â”‚   â”œâ”€â”€ HomeScreen.js
â”‚   â”‚   â”œâ”€â”€ ProfileScreen.js
â”‚   â”‚   â””â”€â”€ WithdrawScreen.js
â”‚   â”œâ”€â”€ context/AuthContext.js
â”‚   â”œâ”€â”€ navigation/AppNavigator.js
â”‚   â””â”€â”€ services/api.js
â””â”€â”€ package.json
```

---

## Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±

### Ù…Ø³ØªØ®Ø¯Ù… Ø§Ø®ØªØ¨Ø§Ø±
- Email: `test@saqr.com`
- Password: `test123456`

### Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø´Ø±Ù
- Email: `admin@saqr.com`
- Password: `admin123`

---

## Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© (Upcoming)

### Ø£ÙˆÙ„ÙˆÙŠØ© Ø¹Ø§Ù„ÙŠØ© (P1)
1. ğŸ”² Ø¥Ø¶Ø§ÙØ© **TAP_API_KEY** Ù„ØªÙØ¹ÙŠÙ„ Tap Payments
2. ğŸ”² Ù†Ø´Ø± ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø¹Ù„Ù‰ App Store Ùˆ Google Play

### Ø£ÙˆÙ„ÙˆÙŠØ© Ù…ØªÙˆØ³Ø·Ø© (P2)
3. ğŸ”² Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ù„Ù„Ù…Ø¹Ù„Ù†ÙŠÙ†
4. ğŸ”² Push Notifications

### Ø£ÙˆÙ„ÙˆÙŠØ© Ù…Ù†Ø®ÙØ¶Ø© (P3)
5. ğŸ”² Dark Mode
6. ğŸ”² Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…ÙØµÙ„Ø© Ù„Ù„Ù…Ø¹Ù„Ù†ÙŠÙ†

---

## API Endpoints

### Authentication
- `POST /api/auth/session` - Process Google OAuth session
- `GET /api/auth/me` - Get current user
- `POST /api/auth/logout` - Logout
- `POST /api/auth/register` - Email registration
- `POST /api/auth/login/email` - Email login

### Ads
- `GET /api/ads` - Get all active ads
- `POST /api/ads/watch` - Record ad watch

### Payments (Stripe)
- `GET /api/payments/packages` - Get pricing packages
- `POST /api/payments/checkout` - Create Stripe checkout
- `GET /api/payments/status/{session_id}` - Check payment status

### Payments (Tap)
- `GET /api/tap/status` - Check Tap availability
- `POST /api/tap/checkout` - Create Tap checkout
- `GET /api/tap/status/{charge_id}` - Check Tap payment status

### Withdrawals
- `POST /api/withdrawals` - Create withdrawal request
- `GET /api/withdrawals` - Get user withdrawals

### Admin
- `POST /api/admin/auth/login` - Admin login
- `GET /api/admin/dashboard/stats` - Dashboard stats
- `GET /api/admin/dashboard/withdrawals/pending` - Pending withdrawals
- `GET /api/admin/dashboard/ads/pending` - Pending ads

---

## URLs

- **Frontend**: https://pointads.preview.emergentagent.com
- **Admin Panel**: https://pointads.preview.emergentagent.com/admin/login
- **API Base**: https://pointads.preview.emergentagent.com/api

---

## Ù„ØªÙØ¹ÙŠÙ„ Tap Payments

Ø£Ø¶Ù Ø§Ù„Ù…ÙØªØ§Ø­ ÙÙŠ `/app/backend/.env`:
```
TAP_API_KEY=sk_live_xxxxx
```

Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙØªØ§Ø­ Ù…Ù†: https://dashboard.tap.company/settings/api-keys
